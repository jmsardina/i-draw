function setUpEnvironment(){
  setTray();
  setCanvas();
  listenOnSelections();
  listenOnMouse();
  listenOnCanvasClearing();
  setModals();
  
  function setCanvas(){
    var canvasDiv = document.getElementById('canvasDiv');
    var imageHolder = document.createElement("canvas");
    imageHolder.setAttribute("id", "image-holder");
    var midLayer = document.createElement("canvas");
    midLayer.setAttribute("id", "mid-layer");

    var canvas = document.createElement("canvas");
    canvas.setAttribute("id", "canvas");
    canvas.setAttribute("width", "900px");
    canvas.setAttribute("height", "500px");

    canvasDiv.appendChild(imageHolder);
    canvasDiv.appendChild(midLayer);
    canvasDiv.appendChild(canvas);
    imageHolderContext = imageHolder.getContext("2d");
    midLayerContext = midLayer.getContext("2d");
    context = canvas.getContext("2d");
  }

  function setTray(){
    var canvasDiv = document.getElementById("canvasDiv");
    var tray = document.createElement("div");
    tray.setAttribute("id", "tray");

    var colorsDiv = document.createElement("div");
    colorsDiv.setAttribute("id", "colors");
    tray.appendChild(colorsDiv);

    var tipsDiv = document.createElement("div");
    tipsDiv.setAttribute("id", "tips");
    tray.appendChild(tipsDiv);

    var toolDiv = document.createElement("div");
    toolDiv.setAttribute("id", "eraser-div");

    var eraser = document.createElement("div");
    eraser.setAttribute("id", "eraser");
    eraser.setAttribute("style", "background: url(http://icons.iconarchive.com/icons/oxygen-icons.org/oxygen/64/Actions-draw-eraser-icon.png) no-repeat center;height:50px;width:50px");

    toolDiv.appendChild(eraser);
    tray.appendChild(toolDiv);
    canvasDiv.appendChild(tray);

    colors();
    tips();

    function colors(){
      <% Drawing::COLORS.each do |color| %>
        var <%= color %> = document.createElement("button");
        <%= color %>.setAttribute("id", "<%= color %>");
        <%= color %>.setAttribute("class", "color");
        <%= color %>.setAttribute("style", "background-color:<%= color %>;border-radius:50%;height:50px;width:50px")
        colorsDiv.appendChild(<%= color %>);
      <% end %>
      var colorPicker = document.getElementById("html5DIV");
      colorsDiv.appendChild(colorPicker);
    }

    function tips(){
      <% Drawing::TIPS.each do |tip| %>
        var size<%= tip %> = document.createElement("div");
        size<%= tip %>.setAttribute("id", "size<%= tip %>");
        size<%= tip %>.setAttribute("class", "tip")
        size<%= tip %>.setAttribute("style", "background-color:black;border-radius:50%;height:<%= tip %>px;width:<%= tip %>px;display:inline-block;");
        tipsDiv.appendChild(size<%= tip %>);
      <% end %>
    }
  }
}